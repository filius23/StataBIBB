[["iflab.html", "4 if-Bedingungen 4.1 if-Bedingungen - nur manche Zeilen ansehen 4.2 Labels 4.3 Fehlende Werte 4.4 keep &amp; drop: Fälle dauerhaft löschen 4.5 Übungen 4", " 4 if-Bedingungen 4.1 if-Bedingungen - nur manche Zeilen ansehen Bisher haben wir uns immer auf den gesamten Datensatz bezogen. Häufig möchten wir aber nur bestimmte Beobachtungen berücksichtigen. Ein Beispiel war gerade eben schon der fastgini-Befehl, der keine by-Option hat. Wir können mit einer if-Bedingung mitteilen, dass wir lediglich die Beobachtungen mit S1==2 berücksichtigen möchten (also Frauen): fastgini F518_SUF if S1 == 2 Stata geht dann also alle Zeilen durch und verwendet nur diejenigen mit der entsprechenden Ausprägung. Einige Beispiele list zeigen die Möglichkeiten vielleicht etwas besser: Mit einer if-Bedingung können wir uns die Variablen S1 S3 S2_j und zpalter für 81-jährigen Befragten anzeigen lassen: list S1 S3 S2_j zpalter if zpalter == 81 +--------------------------------------+ | S1 S3 S2_j zpalter | |--------------------------------------| 5114. | männlic Abitur / 1936 81 | 5179. | männlic Abitur / 1936 81 | 6118. | männlic Realschu 1936 81 | 9045. | männlic Abitur / 1936 81 | 10517. | weiblich Hauptsch 1936 81 | +--------------------------------------+ Wichtig ist hier == - ein einfaches = wird in Stata für die Zuweisung von Werten verwendet wie wir noch sehen werden. Für if-Bedingungen stehen uns die üblichen Operatoren zur Verfügung: &gt;, &lt;, ==, &gt;=, &lt;=, != (ungleich) Dementsprechend können wir so Befragte auswählen, die vor 1936 geboren wurden: list S1 S3 S2_j zpalter if S2_j &lt; 1936 Das funktioniert auch mit anderen Befehlen, wie z.B. tabulate - so können wir beispielsweise auszählen, wie viele 81-jährige Frauen und Männer im Datensatz vorhanden sind: tabulate S1 if zpalter == 81 Geschlecht | Freq. Percent Cum. ------------+----------------------------------- mÃ¤nnlich | 4 80.00 80.00 weiblich | 1 20.00 100.00 ------------+----------------------------------- Total | 5 100.00 Wir sehen unter anderem an der Fallzahl (Total) in dieser Tabelle, dass hier nicht alle Fälle aus dem Datensatz berücksichtigt werden. Wir können auch mehrere Bedingungen setzen. Sollen beide zutreffen, verbinden wir die Bedingungen mit &amp; - zB. wenn wir 81-jährige Befragte mit einem Bruttoverdienst von unter 1000 Euro auswählen möchten: list S1 if zpalter &gt; 81 &amp; F518_SUF &lt; 1000 Mit | können wir hingegen Fälle auswählen, für welche die ein oder die andere Bedingung zutrifft: tabulate S1 if zpalter == 81 | F518_SUF &lt; 1000 // 81 Jahre alt oder unter 1000EUR Einkommen Mit inrange können wir Auswahlen auf einen Wertebereich eingrenzen - d.h. diese beiden Auswahlen führen zum gleichen Ergebnis (nur Befragte, die zwischen 20 und 30 Jahre alt sind): tabulate S1 if zpalter &gt;= 20 &amp; zpalter &lt;= 30 tabulate S1 if inrange(zpalter,20,30) Mit inlist können wir spezifische Werte angeben und so lange Folgen von | vermeiden: tabulate S1 if zpalter == 15 | zpalter == 79 | zpalter == 80 | zpalter == 82 tabulate S1 if inlist(zpalter,15,79,80,82) 4.2 Labels Genauso könnten wir auch vorgehen wenn wir nur männliche oder weibliche Befragte betrachten möchten. Hier nochmal die Auszählung der Variable S1: tabulate S1 Geschlecht | Freq. Percent Cum. ------------+----------------------------------- mÃ¤nnlich | 10,074 50.34 50.34 weiblich | 9,938 49.66 100.00 ------------+----------------------------------- Total | 20,012 100.00 Allerdings sind männlich und weiblich lediglich Variablenlabels. D.h. hier wurden Zahlencodes wieder mit Beschreibungen verbunden. Wir können diese Labels nicht für if-Bedingungen verwenden: tab S1 if S1 == &quot;weiblich&quot; type mismatch r(109); Im Hintergrund ist S1 nämlich eine numerische Variable describe S1 storage display value variable name type format label variable label ------------------------------------------------------------------------------------------ S1 byte %8.0g S1 Geschlecht Unter value label sehen wir, dass hier das Label S1 angefügt wurde. Wir können die eigentlichen Werte in tabulate mit der Option ,nol ausblenden: tabulate S1, nol Geschlecht | Freq. Percent Cum. ------------+----------------------------------- 1 | 10,074 50.34 50.34 2 | 9,938 49.66 100.00 ------------+----------------------------------- Total | 20,012 100.00 Wenn wir also nach Frauen filtern möchten, müssen wir den entsprechenden Zahlencode angeben: tab S1 if S1 == 2 Geschlecht | Freq. Percent Cum. ------------+----------------------------------- weiblich | 9,938 100.00 100.00 ------------+----------------------------------- Total | 9,938 100.00 Mehr zu labels hier 4.3 Fehlende Werte Eine häufige Fehlerquelle bei fehlende Werten in Stata ist deren Verhältnis zu &gt;. Fehlende Werte werden nämlich von Stata als unendlich groß gewertet! Wenn wir uns Befragte mit einem Alter über 92 ausgeben lassen, dann bekommen wir auch diejenigen ohne Altersangabe ausgegegeben: list S1 S3 zpalter if zpalter &gt; 81 +-------------------------------+ | S1 S3 zpalter | |-------------------------------| 39. | weiblich Abitur / . | 514. | weiblich Abitur / 83 | 657. | männlic Hauptsch . | 823. | weiblich Realschu . | 982. | weiblich keine An . | |-------------------------------| | 150 weitere Zeilen | Es gibt zwei Möglichkeiten, dies zu umgehen: entweder wir verwenden inrange - wobei wir hier eine Obergrenze angeben müssen und außerdem die Untergrenze immer mit eingeschlossen wird. Wenn wir also nur Fälle sehen wollen, die älter als 81 sind, dann müssen wir einen Wert über 81 angeben: list S1 Bula zpalter if inrange(zpalter,81.5,100) oder wir hängen den missing()-Operator an die Bedingung an. Mit missing(zpalter) können wir alle Zeilen auswählen, für die zpalter missing ist. Wenn wir diesen mit Hilfe eines ! verneinen, können wir die fehlende Fällen ausschließen: list S1 Bula zpalter if zpalter &gt; 81 &amp; !missing(zpalter) Beide Befehle führen zum gleichen Ergebnis: +-------------------------------+ | S1 Bula zpalter | |-------------------------------| 514. | weiblich Hamburg 83 | 6438. | männlic Nordrhei 82 | 11786. | männlic Berlin 87 | +-------------------------------+ 4.4 keep &amp; drop: Fälle dauerhaft löschen Manchmal möchten wir nur bestimmte Beobachtungen im Datensatz behalten. Beispielsweise möchten wir für eine Analyse nur Befragte, die jünger als 30 Jahre sind, im Datensatz behalten. Dazu können wir keep oder drop die gewünschten Fälle behalten bzw. die ungewünschten ausschließen: keep if zpalter &lt; 30 Alternativ können wir auch mit drop alle Befragten aus dem Datensatz löschen, die 60 Jahre oder älter sind: drop if zpalter &gt;= 30 Mit describe, short sehen wir, dass wir jetzt deutlich weniger Fälle im Speicher haben: describe, short Contains data from D:\\Datenspeicher\\BIBB_BAuA/BIBBBAuA_2018_suf1.0.dta obs: 1,639 vars: 683 2 Nov 2021 17:34 Sorted by: intnr Note: Dataset has changed since last saved. 4.5 Übungen 4 Laden Sie den BIBB/BAuA Erwerbstätigenbefragung 2018 (BIBBBAuA_2018_suf1.dta). In der Variable intnr ist die Interviewnummer abgelegt. Lassen Sie sich die Interviewnummer (intnr), Alter (zpalter), Geschlecht (S1) und die Wohnortgröße (gkpol) für den*die Befragte mit der Interviewnummer 2388097 ausgeben. Ersetzen Sie die Werte 9999 in zpalter mit .: mvdecode zpalter, mv(9999) Lassen Sie sich die Wohngröße (gkpol) für alle Befragte mit fehlender Altersangabe ausgeben. Lassen Sie sich eine Häufigkeitsauszählung der Wohnortgröße (tab gkpol) für folgende Gruppen ausgeben: Befragte, die jünger als 30 Jahre alt sind (das Alter ist in zpalter abgelegt) Befragte, die älter als 60 Jahre alt sind (Denken Sie an den Umgang mit Missings!) Befragte, die jünger als 30 Jahre alt und weiblich sind (das Geschlecht ist in S1 erfasst) Befragte, die zwischen 30 und 60 Jahre alt sind Befragte, die jünger als 30 Jahre alt sind oder älter als 60 Jahre alt sind Löschen Sie alle Beobachtungen von Befragten aus Städten mit 500.000 Einwohnern und mehr aus dem Speicher. Denken Sie an die Unterscheidung zwischen Labels und Zahlenwerten. "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
