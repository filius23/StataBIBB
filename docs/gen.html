<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>5 Variablen erstellen und verändern | Stata Fortbildungen am BIBB</title>
  <meta name="description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="5 Variablen erstellen und verändern | Stata Fortbildungen am BIBB" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="5 Variablen erstellen und verändern | Stata Fortbildungen am BIBB" />
  
  <meta name="twitter:description" content="This is a minimal example of using the bookdown package to write a book. The output format for this example is bookdown::gitbook." />
  

<meta name="author" content="Andreas Filser" />


<meta name="date" content="2021-11-29" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="iflab.html"/>
<link rel="next" href="egen.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Stata @ BIBB</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Herzlich Willkommen</a></li>
<li class="chapter" data-level="1" data-path="stata.html"><a href="stata.html"><i class="fa fa-check"></i><b>1</b> Überblick zu Stata</a>
<ul>
<li class="chapter" data-level="1.1" data-path="stata.html"><a href="stata.html#taschenrechner"><i class="fa fa-check"></i><b>1.1</b> Taschenrechner</a></li>
<li class="chapter" data-level="1.2" data-path="stata.html"><a href="stata.html#darstellung-in-diesem-skript"><i class="fa fa-check"></i><b>1.2</b> Darstellung in diesem Skript</a></li>
<li class="chapter" data-level="1.3" data-path="stata.html"><a href="stata.html#dofile-editor"><i class="fa fa-check"></i><b>1.3</b> DoFile Editor</a></li>
<li class="chapter" data-level="1.4" data-path="stata.html"><a href="stata.html#datensätze-laden"><i class="fa fa-check"></i><b>1.4</b> Datensätze laden</a></li>
<li class="chapter" data-level="1.5" data-path="stata.html"><a href="stata.html#daten-codebücher-fragebogen"><i class="fa fa-check"></i><b>1.5</b> Daten, Codebücher, Fragebogen</a></li>
<li class="chapter" data-level="1.6" data-path="stata.html"><a href="stata.html#überblicksbefehle"><i class="fa fa-check"></i><b>1.6</b> Überblicksbefehle</a>
<ul>
<li class="chapter" data-level="1.6.1" data-path="stata.html"><a href="stata.html#describe"><i class="fa fa-check"></i><b>1.6.1</b> <code>describe</code></a></li>
<li class="chapter" data-level="1.6.2" data-path="stata.html"><a href="stata.html#browse"><i class="fa fa-check"></i><b>1.6.2</b> <code>browse</code></a></li>
<li class="chapter" data-level="1.6.3" data-path="stata.html"><a href="stata.html#list"><i class="fa fa-check"></i><b>1.6.3</b> <code>list</code></a></li>
<li class="chapter" data-level="1.6.4" data-path="stata.html"><a href="stata.html#lookfor"><i class="fa fa-check"></i><b>1.6.4</b> <code>lookfor</code></a></li>
</ul></li>
<li class="chapter" data-level="1.7" data-path="stata.html"><a href="stata.html#U1"><i class="fa fa-check"></i><b>1.7</b> Übungen 1</a></li>
<li class="chapter" data-level="1.8" data-path="stata.html"><a href="stata.html#profi-übungen-1"><i class="fa fa-check"></i><b>1.8</b> Profi-Übungen 1</a></li>
<li class="chapter" data-level="1.9" data-path="stata.html"><a href="stata.html#anhang-1"><i class="fa fa-check"></i><b>1.9</b> Anhang 1</a>
<ul>
<li class="chapter" data-level="1.9.1" data-path="stata.html"><a href="stata.html#var_types"><i class="fa fa-check"></i><b>1.9.1</b> Variablentypen</a></li>
<li class="chapter" data-level="1.9.2" data-path="stata.html"><a href="stata.html#otherfmts"><i class="fa fa-check"></i><b>1.9.2</b> import anderer Dateiformate</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="2" data-path="Stata2.html"><a href="Stata2.html"><i class="fa fa-check"></i><b>2</b> Arbeiten mit Datensätzen in Stata</a>
<ul>
<li class="chapter" data-level="2.1" data-path="Stata2.html"><a href="Stata2.html#befehlsstruktur"><i class="fa fa-check"></i><b>2.1</b> Befehlsstruktur</a>
<ul>
<li class="chapter" data-level="2.1.1" data-path="Stata2.html"><a href="Stata2.html#zeilenumbrüche"><i class="fa fa-check"></i><b>2.1.1</b> Zeilenumbrüche</a></li>
<li class="chapter" data-level="2.1.2" data-path="Stata2.html"><a href="Stata2.html#kommentare"><i class="fa fa-check"></i><b>2.1.2</b> Kommentare</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="Stata2.html"><a href="Stata2.html#auszählen-überblick-erhalten"><i class="fa fa-check"></i><b>2.2</b> Auszählen &amp; Überblick erhalten</a></li>
<li class="chapter" data-level="2.3" data-path="Stata2.html"><a href="Stata2.html#missv"><i class="fa fa-check"></i><b>2.3</b> Fehlende Werte</a></li>
<li class="chapter" data-level="2.4" data-path="Stata2.html"><a href="Stata2.html#zwei-variablen-eine-tabelle-kontingenztabellen"><i class="fa fa-check"></i><b>2.4</b> Zwei Variablen, eine Tabelle: Kontingenztabellen</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="Stata2.html"><a href="Stata2.html#in-prozent-relative-häufigkeiten"><i class="fa fa-check"></i><b>2.4.1</b> In Prozent: Relative Häufigkeiten</a></li>
<li class="chapter" data-level="2.4.2" data-path="Stata2.html"><a href="Stata2.html#pro-gruppe-1-zeilenprozente"><i class="fa fa-check"></i><b>2.4.2</b> pro Gruppe 1: Zeilenprozente</a></li>
<li class="chapter" data-level="2.4.3" data-path="Stata2.html"><a href="Stata2.html#pro-gruppe-2-spaltenprozente"><i class="fa fa-check"></i><b>2.4.3</b> pro Gruppe 2: Spaltenprozente</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="Stata2.html"><a href="Stata2.html#metrische-variablen"><i class="fa fa-check"></i><b>2.5</b> metrische Variablen</a></li>
<li class="chapter" data-level="2.6" data-path="Stata2.html"><a href="Stata2.html#skalenn"><i class="fa fa-check"></i><b>2.6</b> Exkurs: Skalenniveau</a></li>
<li class="chapter" data-level="2.7" data-path="Stata2.html"><a href="Stata2.html#nochmal-von-vorne-daten-neu-laden"><i class="fa fa-check"></i><b>2.7</b> Nochmal von vorne: Daten neu laden</a></li>
<li class="chapter" data-level="2.8" data-path="Stata2.html"><a href="Stata2.html#speichern"><i class="fa fa-check"></i><b>2.8</b> Speichern</a></li>
<li class="chapter" data-level="2.9" data-path="Stata2.html"><a href="Stata2.html#übungen-2"><i class="fa fa-check"></i><b>2.9</b> Übungen 2</a>
<ul>
<li class="chapter" data-level="2.9.1" data-path="Stata2.html"><a href="Stata2.html#tab2"><i class="fa fa-check"></i><b>2.9.1</b> Übung 2-1</a></li>
<li class="chapter" data-level="2.9.2" data-path="Stata2.html"><a href="Stata2.html#su2"><i class="fa fa-check"></i><b>2.9.2</b> Übung 2-2</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="desc1.html"><a href="desc1.html"><i class="fa fa-check"></i><b>3</b> Deskriptive Statistik</a>
<ul>
<li class="chapter" data-level="3.1" data-path="desc1.html"><a href="desc1.html#metrische-variablen-beschreiben"><i class="fa fa-check"></i><b>3.1</b> Metrische Variablen beschreiben</a>
<ul>
<li class="chapter" data-level="3.1.1" data-path="desc1.html"><a href="desc1.html#cut"><i class="fa fa-check"></i><b>3.1.1</b> Exkurs: Klassen bilden</a></li>
<li class="chapter" data-level="3.1.2" data-path="desc1.html"><a href="desc1.html#lage--und-konzentrationsmaße"><i class="fa fa-check"></i><b>3.1.2</b> Lage- und Konzentrationsmaße</a></li>
<li class="chapter" data-level="3.1.3" data-path="desc1.html"><a href="desc1.html#tabstat"><i class="fa fa-check"></i><b>3.1.3</b> <code>tabstat</code></a></li>
<li class="chapter" data-level="3.1.4" data-path="desc1.html"><a href="desc1.html#by_vgl"><i class="fa fa-check"></i><b>3.1.4</b> Kennzahlen vergleichen mit <code>tabstat</code></a></li>
<li class="chapter" data-level="3.1.5" data-path="desc1.html"><a href="desc1.html#streu"><i class="fa fa-check"></i><b>3.1.5</b> Streuungsmaße: Varianz, Standardabweichung, Variationskoeffizient</a></li>
<li class="chapter" data-level="3.1.6" data-path="desc1.html"><a href="desc1.html#gini"><i class="fa fa-check"></i><b>3.1.6</b> Gini-Koeffizient</a></li>
</ul></li>
<li class="chapter" data-level="3.2" data-path="desc1.html"><a href="desc1.html#übungen-3"><i class="fa fa-check"></i><b>3.2</b> Übungen 3</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="desc1.html"><a href="desc1.html#met"><i class="fa fa-check"></i><b>3.2.1</b> Übung 3-1</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="desc1.html"><a href="desc1.html#anhang-kap-3"><i class="fa fa-check"></i><b>3.3</b> Anhang Kap 3</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="desc1.html"><a href="desc1.html#mean"><i class="fa fa-check"></i><b>3.3.1</b> Arithmetisches Mittel</a></li>
<li class="chapter" data-level="3.3.2" data-path="desc1.html"><a href="desc1.html#median"><i class="fa fa-check"></i><b>3.3.2</b> Median</a></li>
<li class="chapter" data-level="3.3.3" data-path="desc1.html"><a href="desc1.html#perc"><i class="fa fa-check"></i><b>3.3.3</b> Perzentile erklärt</a></li>
<li class="chapter" data-level="3.3.4" data-path="desc1.html"><a href="desc1.html#variance"><i class="fa fa-check"></i><b>3.3.4</b> Varianz erklärt</a></li>
<li class="chapter" data-level="3.3.5" data-path="desc1.html"><a href="desc1.html#sk_kur"><i class="fa fa-check"></i><b>3.3.5</b> Schiefe &amp; Wölbung</a></li>
<li class="chapter" data-level="3.3.6" data-path="desc1.html"><a href="desc1.html#kennzahlvergleich-mit-tabulate-und-der-option-summarize"><i class="fa fa-check"></i><b>3.3.6</b> Kennzahlvergleich mit <code>tabulate</code> und der Option <code>summarize()</code></a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="iflab.html"><a href="iflab.html"><i class="fa fa-check"></i><b>4</b> if-Bedingungen</a>
<ul>
<li class="chapter" data-level="4.1" data-path="iflab.html"><a href="iflab.html#if-bedingungen---nur-manche-zeilen-ansehen"><i class="fa fa-check"></i><b>4.1</b> if-Bedingungen - nur manche Zeilen ansehen</a>
<ul>
<li class="chapter" data-level="4.1.1" data-path="iflab.html"><a href="iflab.html#labels"><i class="fa fa-check"></i><b>4.1.1</b> Labels</a></li>
<li class="chapter" data-level="4.1.2" data-path="iflab.html"><a href="iflab.html#miss_if"><i class="fa fa-check"></i><b>4.1.2</b> Fehlende Werte</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="iflab.html"><a href="iflab.html#keep-drop-fälle-dauerhaft-löschen"><i class="fa fa-check"></i><b>4.2</b> keep &amp; drop: Fälle dauerhaft löschen</a></li>
<li class="chapter" data-level="4.3" data-path="iflab.html"><a href="iflab.html#ifue"><i class="fa fa-check"></i><b>4.3</b> Übungen 4</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="gen.html"><a href="gen.html"><i class="fa fa-check"></i><b>5</b> Variablen erstellen und verändern</a>
<ul>
<li class="chapter" data-level="5.1" data-path="gen.html"><a href="gen.html#gen-ist-gut-kontrolle-ist-besser"><i class="fa fa-check"></i><b>5.1</b> gen ist gut, Kontrolle ist besser</a></li>
<li class="chapter" data-level="5.2" data-path="gen.html"><a href="gen.html#dummyvar"><i class="fa fa-check"></i><b>5.2</b> Dummy-Variablen erstellen</a></li>
<li class="chapter" data-level="5.3" data-path="gen.html"><a href="gen.html#label"><i class="fa fa-check"></i><b>5.3</b> Neue Variablen labeln</a></li>
<li class="chapter" data-level="5.4" data-path="gen.html"><a href="gen.html#bestehende-variablen-verändern"><i class="fa fa-check"></i><b>5.4</b> Bestehende Variablen verändern</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="gen.html"><a href="gen.html#recode"><i class="fa fa-check"></i><b>5.4.1</b> <code>recode</code></a></li>
<li class="chapter" data-level="5.4.2" data-path="gen.html"><a href="gen.html#replace-informationen-aus-mehreren-variablen-in-einer-variable-zusammenführen"><i class="fa fa-check"></i><b>5.4.2</b> <code>replace</code>: Informationen aus mehreren Variablen in einer Variable zusammenführen</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="gen.html"><a href="gen.html#genue"><i class="fa fa-check"></i><b>5.5</b> Übungen 5</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="gen.html"><a href="gen.html#ue51"><i class="fa fa-check"></i><b>5.5.1</b> Übung 5-1</a></li>
<li class="chapter" data-level="5.5.2" data-path="gen.html"><a href="gen.html#ue52"><i class="fa fa-check"></i><b>5.5.2</b> Übung 5-2</a></li>
<li class="chapter" data-level="5.5.3" data-path="gen.html"><a href="gen.html#ue53"><i class="fa fa-check"></i><b>5.5.3</b> Übung 5-3</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="egen.html"><a href="egen.html"><i class="fa fa-check"></i><b>6</b> Variablen erstellen (2), Hilfe verwenden</a>
<ul>
<li class="chapter" data-level="6.1" data-path="egen.html"><a href="egen.html#egen-1"><i class="fa fa-check"></i><b>6.1</b> <code>egen</code></a></li>
<li class="chapter" data-level="6.2" data-path="egen.html"><a href="egen.html#erklärungen-für-help-und-stata-begriffe"><i class="fa fa-check"></i><b>6.2</b> Erklärungen für <code>help</code> und Stata-Begriffe</a>
<ul>
<li class="chapter" data-level="6.2.1" data-path="egen.html"><a href="egen.html#numlist-varlist-varname"><i class="fa fa-check"></i><b>6.2.1</b> numlist, varlist, varname</a></li>
<li class="chapter" data-level="6.2.2" data-path="egen.html"><a href="egen.html#beispielsyntax-in-den-help-dateien"><i class="fa fa-check"></i><b>6.2.2</b> Beispielsyntax in den <code>help</code> Dateien</a></li>
</ul></li>
<li class="chapter" data-level="6.3" data-path="egen.html"><a href="egen.html#by"><i class="fa fa-check"></i><b>6.3</b> <code>by</code></a></li>
<li class="chapter" data-level="6.4" data-path="egen.html"><a href="egen.html#egenue"><i class="fa fa-check"></i><b>6.4</b> Übungen 6</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="egen.html"><a href="egen.html#egenue1"><i class="fa fa-check"></i><b>6.4.1</b> Übungen 6-1</a></li>
<li class="chapter" data-level="6.4.2" data-path="egen.html"><a href="egen.html#byue"><i class="fa fa-check"></i><b>6.4.2</b> Übungen 6-2</a></li>
<li class="chapter" data-level="6.4.3" data-path="egen.html"><a href="egen.html#bonusaufgabe"><i class="fa fa-check"></i><b>6.4.3</b> Bonusaufgabe</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="egen.html"><a href="egen.html#anhang"><i class="fa fa-check"></i><b>6.5</b> Anhang</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="egen.html"><a href="egen.html#bys_su"><i class="fa fa-check"></i><b>6.5.1</b> Kombination von <code>summarize</code> mit dem <code>by</code>-Präfix</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="infer.html"><a href="infer.html"><i class="fa fa-check"></i><b>7</b> Inferenzstatistik</a>
<ul>
<li class="chapter" data-level="7.1" data-path="infer.html"><a href="infer.html#inferenz-von-der-stichprobe-zur-allgemeinen-aussage"><i class="fa fa-check"></i><b>7.1</b> Inferenz: von der Stichprobe zur allgemeinen Aussage</a></li>
<li class="chapter" data-level="7.2" data-path="infer.html"><a href="infer.html#ttest"><i class="fa fa-check"></i><b>7.2</b> Hypothesentests</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="infer.html"><a href="infer.html#ttest1"><i class="fa fa-check"></i><b>7.2.1</b> beiseitiger t-Test</a></li>
<li class="chapter" data-level="7.2.2" data-path="infer.html"><a href="infer.html#linksseitiger-t-test"><i class="fa fa-check"></i><b>7.2.2</b> linksseitiger t-Test</a></li>
<li class="chapter" data-level="7.2.3" data-path="infer.html"><a href="infer.html#rechtsseitiger-t-test"><i class="fa fa-check"></i><b>7.2.3</b> rechtsseitiger t-Test</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="infer.html"><a href="infer.html#mittelwertttest"><i class="fa fa-check"></i><b>7.3</b> Mittelwertvergleiche mit dem t-Test</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="infer.html"><a href="infer.html#unverbundener-t-test"><i class="fa fa-check"></i><b>7.3.1</b> Unverbundener t-Test</a></li>
<li class="chapter" data-level="7.3.2" data-path="infer.html"><a href="infer.html#verbundener-t-test"><i class="fa fa-check"></i><b>7.3.2</b> Verbundener t-Test</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="infer.html"><a href="infer.html#übersicht-zu-varianten-für-ttest"><i class="fa fa-check"></i><b>7.4</b> Übersicht zu Varianten für <code>ttest</code></a></li>
<li class="chapter" data-level="7.5" data-path="infer.html"><a href="infer.html#gewichtung-in-stata"><i class="fa fa-check"></i><b>7.5</b> Gewichtung in Stata</a></li>
<li class="chapter" data-level="7.6" data-path="infer.html"><a href="infer.html#übungen-7"><i class="fa fa-check"></i><b>7.6</b> Übungen 7</a>
<ul>
<li class="chapter" data-level="7.6.1" data-path="infer.html"><a href="infer.html#tvsmu"><i class="fa fa-check"></i><b>7.6.1</b> Übung 7.1</a></li>
<li class="chapter" data-level="7.6.2" data-path="infer.html"><a href="infer.html#tgroup"><i class="fa fa-check"></i><b>7.6.2</b> Übung 7.2</a></li>
<li class="chapter" data-level="7.6.3" data-path="infer.html"><a href="infer.html#tpaired"><i class="fa fa-check"></i><b>7.6.3</b> Übung 7.3</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="infer.html"><a href="infer.html#anhang-2"><i class="fa fa-check"></i><b>7.7</b> Anhang</a>
<ul>
<li class="chapter" data-level="7.7.1" data-path="infer.html"><a href="infer.html#distr"><i class="fa fa-check"></i><b>7.7.1</b> Student-t vs. Normalverteilung</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="zshg.html"><a href="zshg.html"><i class="fa fa-check"></i><b>8</b> Zusammenhangsmaße</a>
<ul>
<li class="chapter" data-level="8.1" data-path="zshg.html"><a href="zshg.html#zshg_met"><i class="fa fa-check"></i><b>8.1</b> Metrisch skalierte Variablen</a>
<ul>
<li class="chapter" data-level="8.1.1" data-path="zshg.html"><a href="zshg.html#cor"><i class="fa fa-check"></i><b>8.1.1</b> Korrelationskoeffizient</a></li>
</ul></li>
<li class="chapter" data-level="8.2" data-path="zshg.html"><a href="zshg.html#zshg_ord"><i class="fa fa-check"></i><b>8.2</b> Ordinal skalierte Variablen</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="zshg.html"><a href="zshg.html#spear"><i class="fa fa-check"></i><b>8.2.1</b> Spearman- Rangkorrelation</a></li>
<li class="chapter" data-level="8.2.2" data-path="zshg.html"><a href="zshg.html#tau"><i class="fa fa-check"></i><b>8.2.2</b> Konkordanzmaße</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="zshg.html"><a href="zshg.html#zshg_nom"><i class="fa fa-check"></i><b>8.3</b> Nominal skalierte Variablen</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="zshg.html"><a href="zshg.html#chi2"><i class="fa fa-check"></i><b>8.3.1</b> Chi²-basierte Maße</a></li>
<li class="chapter" data-level="8.3.2" data-path="zshg.html"><a href="zshg.html#cramérs-upsilon"><i class="fa fa-check"></i><b>8.3.2</b> Cramér’s <span class="math inline">\(\upsilon\)</span></a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="zshg.html"><a href="zshg.html#welches-maß-richtig"><i class="fa fa-check"></i><b>8.4</b> Welches Maß richtig?</a></li>
<li class="chapter" data-level="8.5" data-path="zshg.html"><a href="zshg.html#übungen-8"><i class="fa fa-check"></i><b>8.5</b> Übungen 8</a>
<ul>
<li class="chapter" data-level="8.5.1" data-path="zshg.html"><a href="zshg.html#met_ord"><i class="fa fa-check"></i><b>8.5.1</b> Übung 8-1</a></li>
<li class="chapter" data-level="8.5.2" data-path="zshg.html"><a href="zshg.html#auf_nom"><i class="fa fa-check"></i><b>8.5.2</b> Übung 8-2</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="zshg.html"><a href="zshg.html#anhang-3"><i class="fa fa-check"></i><b>8.6</b> Anhang</a>
<ul>
<li class="chapter" data-level="8.6.1" data-path="zshg.html"><a href="zshg.html#indiff"><i class="fa fa-check"></i><b>8.6.1</b> Indifferenztabelle</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="regression.html"><a href="regression.html"><i class="fa fa-check"></i><b>9</b> Regressionsmodelle</a>
<ul>
<li class="chapter" data-level="9.1" data-path="regression.html"><a href="regression.html#reg_intro"><i class="fa fa-check"></i><b>9.1</b> Regressionsmodelle - Grundlagen</a>
<ul>
<li class="chapter" data-level="9.1.1" data-path="regression.html"><a href="regression.html#vorhergesagte-werte"><i class="fa fa-check"></i><b>9.1.1</b> vorhergesagte Werte</a></li>
<li class="chapter" data-level="9.1.2" data-path="regression.html"><a href="regression.html#korrelation-und-regression"><i class="fa fa-check"></i><b>9.1.2</b> Korrelation und Regression</a></li>
</ul></li>
<li class="chapter" data-level="9.2" data-path="regression.html"><a href="regression.html#kategoriale-unabhängige-variablen"><i class="fa fa-check"></i><b>9.2</b> kategoriale unabhängige Variablen</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="regression.html"><a href="regression.html#dummyvariablen"><i class="fa fa-check"></i><b>9.2.1</b> Dummyvariablen</a></li>
<li class="chapter" data-level="9.2.2" data-path="regression.html"><a href="regression.html#vergleich-mit-ttest"><i class="fa fa-check"></i><b>9.2.2</b> Vergleich mit <code>ttest</code></a></li>
<li class="chapter" data-level="9.2.3" data-path="regression.html"><a href="regression.html#mehrere-ausprägungen"><i class="fa fa-check"></i><b>9.2.3</b> Mehrere Ausprägungen</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="regression.html"><a href="regression.html#mehrere-unabhängige-variablen"><i class="fa fa-check"></i><b>9.3</b> mehrere unabhängige Variablen</a>
<ul>
<li class="chapter" data-level="9.3.1" data-path="regression.html"><a href="regression.html#interaktionsterme"><i class="fa fa-check"></i><b>9.3.1</b> Interaktionsterme</a></li>
</ul></li>
<li class="chapter" data-level="9.4" data-path="regression.html"><a href="regression.html#übungen-9"><i class="fa fa-check"></i><b>9.4</b> Übungen 9</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="regression.html"><a href="regression.html#regue1"><i class="fa fa-check"></i><b>9.4.1</b> Übung 9-1</a></li>
<li class="chapter" data-level="9.4.2" data-path="regression.html"><a href="regression.html#regue2"><i class="fa fa-check"></i><b>9.4.2</b> Übung 9-2</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="regression.html"><a href="regression.html#anhang-4"><i class="fa fa-check"></i><b>9.5</b> Anhang</a>
<ul>
<li class="chapter" data-level="9.5.1" data-path="regression.html"><a href="regression.html#marginsplot-anpassen"><i class="fa fa-check"></i><b>9.5.1</b> <code>marginsplot</code> anpassen</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="10" data-path="bg_reg.html"><a href="bg_reg.html"><i class="fa fa-check"></i><b>10</b> Regression Hintergründe</a>
<ul>
<li class="chapter" data-level="10.0.1" data-path="bg_reg.html"><a href="bg_reg.html#resid"><i class="fa fa-check"></i><b>10.0.1</b> Residuen</a></li>
<li class="chapter" data-level="10.0.2" data-path="bg_reg.html"><a href="bg_reg.html#quad_res"><i class="fa fa-check"></i><b>10.0.2</b> Quadrierte Residuen</a></li>
<li class="chapter" data-level="10.0.3" data-path="bg_reg.html"><a href="bg_reg.html#interpretation-der-regression"><i class="fa fa-check"></i><b>10.0.3</b> Interpretation der Regression</a></li>
<li class="chapter" data-level="10.0.4" data-path="bg_reg.html"><a href="bg_reg.html#reg_pred"><i class="fa fa-check"></i><b>10.0.4</b> Vorhergesagte Werte</a></li>
<li class="chapter" data-level="10.0.5" data-path="bg_reg.html"><a href="bg_reg.html#resid2"><i class="fa fa-check"></i><b>10.0.5</b> Residuen Teil 2</a></li>
<li class="chapter" data-level="10.0.6" data-path="bg_reg.html"><a href="bg_reg.html#r2"><i class="fa fa-check"></i><b>10.0.6</b> Modellgüte</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="anova.html"><a href="anova.html"><i class="fa fa-check"></i><b>11</b> ANOVA</a>
<ul>
<li class="chapter" data-level="11.0.1" data-path="anova.html"><a href="anova.html#anova-vs.-t-tests"><i class="fa fa-check"></i><b>11.0.1</b> ANOVA vs. t-Tests</a></li>
<li class="chapter" data-level="11.0.2" data-path="anova.html"><a href="anova.html#anova-vs.-lineare-regression"><i class="fa fa-check"></i><b>11.0.2</b> ANOVA vs. lineare Regression</a></li>
<li class="chapter" data-level="11.1" data-path="anova.html"><a href="anova.html#anova-mehrere-gruppen"><i class="fa fa-check"></i><b>11.1</b> ANOVA mehrere Gruppen</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="lit.html"><a href="lit.html"><i class="fa fa-check"></i><b>12</b> Literatur</a>
<ul>
<li class="chapter" data-level="12.1" data-path="lit.html"><a href="lit.html#stata-1"><i class="fa fa-check"></i><b>12.1</b> Stata</a></li>
<li class="chapter" data-level="12.2" data-path="lit.html"><a href="lit.html#statistik-lehrbücher"><i class="fa fa-check"></i><b>12.2</b> Statistik-Lehrbücher</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="appendix.html"><a href="appendix.html"><i class="fa fa-check"></i><b>13</b> Anhang - fortgeschrittene Themen</a>
<ul>
<li class="chapter" data-level="13.1" data-path="appendix.html"><a href="appendix.html#beobachtungen-markieren-mit-gen-if"><i class="fa fa-check"></i><b>13.1</b> Beobachtungen markieren mit <code>gen</code> &amp; <code>if</code></a></li>
<li class="chapter" data-level="13.2" data-path="appendix.html"><a href="appendix.html#index-bilden"><i class="fa fa-check"></i><b>13.2</b> Index bilden</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Stata Fortbildungen am BIBB</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="gen" class="section level1" number="5">
<h1><span class="header-section-number">5</span> Variablen erstellen und verändern</h1>
<p>Natürlich sind wir nicht nur darauf beschränkt, bestehende Variablen anzusehen, sondern wir können auch neue Variablen erstellen. Das geht mit <code>gen</code>. Dazu geben wir erst den neuen Variablennamen an und nach <code>=</code>, wie die neue Variable bestimmt werden soll:</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb136-1"><a href="gen.html#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> alter_mon = zpalter * 12</span>
<span id="cb136-2"><a href="gen.html#cb136-2" aria-hidden="true" tabindex="-1"></a>su zpalter</span></code></pre></div>
<pre><code> | is not a valid command name
r(199);





(176 missing values generated)

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
   alter_mon |     19,836    566.3073    136.0515        180       1044</code></pre>
<p>Wenn wir eine Variable überschreiben möchten, dann müssen wir diese erst mit <code>drop</code> löschen, bevor wir sie überschreiben. Würden wir den <code>gen</code> Befehl von gerade nochmal verwenden, dann bekommen wir eine Fehlermeldung:</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb138-1"><a href="gen.html#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> alter_mon = zpalter * 12</span></code></pre></div>
<pre><code> | is not a valid command name
r(199);






variable alter_mon already defined
r(110);

end of do-file
r(110);</code></pre>
<p>Wir müssen den Namen <code>age_mon</code> also erst wieder frei machen, dann funktioniert der Befehl auch:</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb140-1"><a href="gen.html#cb140-1" aria-hidden="true" tabindex="-1"></a><span class="kw">drop</span> alter_mon</span>
<span id="cb140-2"><a href="gen.html#cb140-2" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> alter_mon = zpalter * 12</span></code></pre></div>
<div id="gen-ist-gut-kontrolle-ist-besser" class="section level2" number="5.1">
<h2><span class="header-section-number">5.1</span> gen ist gut, Kontrolle ist besser</h2>
<p>Wie gerade gesehen gibt uns Stata aber keinerlei Erfolgsmeldungen. Nach der Bearbeitung oder Neuurstellung von Variablen sollte ein Blick in die Daten folgen. Dazu empfiehlt es sich, wieder auf den <code>browse</code> Befehl zurückzugreifen:</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb141-1"><a href="gen.html#cb141-1" aria-hidden="true" tabindex="-1"></a>browse intnr zpalter alter_mon </span></code></pre></div>
<p><img src="pics/05_stata_browse_kontrolle.png" width="90%" style="display: block; margin: auto;" /></p>
<p>In Kombination mit <code>if</code> können wir auch einige Spezialfälle betrachten, z.B. ob die Missings richtig verarbeitet wurden:</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb142-1"><a href="gen.html#cb142-1" aria-hidden="true" tabindex="-1"></a>browse intnr zpalter alter_mon  <span class="kw">if</span> <span class="fu">missing</span>(zpalter)</span></code></pre></div>
<p><img src="pics/05_stata_browse_kontrolle2.png" width="90%" style="display: block; margin: auto;" /></p>
<p>Häufig empfiehlt sich auch ein <code>summarize</code> und ein Vergleich der Missingszahl der alten und neuen Variable mit <code>mdesc</code>:</p>
<div class="sourceCode" id="cb143"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb143-1"><a href="gen.html#cb143-1" aria-hidden="true" tabindex="-1"></a><span class="kw">summarize</span> zpalter alter_mon</span>
<span id="cb143-2"><a href="gen.html#cb143-2" aria-hidden="true" tabindex="-1"></a>mdesc zpalter alter_mon</span></code></pre></div>
<pre><code> | is not a valid command name
r(199);

    Variable |        Obs        Mean    Std. Dev.       Min        Max
-------------+---------------------------------------------------------
     zpalter |     19,836    47.19228    11.33762         15         87
   alter_mon |     19,836    566.3073    136.0515        180       1044

    Variable    |     Missing          Total     Percent Missing
----------------+-----------------------------------------------
        zpalter |         176         20,012           0.88
      alter_mon |         176         20,012           0.88
----------------+-----------------------------------------------</code></pre>
</div>
<div id="dummyvar" class="section level2" number="5.2">
<h2><span class="header-section-number">5.2</span> Dummy-Variablen erstellen</h2>
<p>Wir können auch die Operatoren aus den if-Bedingungen verwenden, um eine Variable zu generieren. Beispielsweise könnten wir eine Dummy-Variable bilden, ob die Befraten im gleichen Bundesland wohnen (<code>Bula</code>) und arbeiten (<code>F233</code>), indem wir den <code>==</code> Operator verwenden. Die entstehende Variable enthält dann immer eine 1 wenn beide Werte gleich sind, unterschiedliche Werte ergeben eine 0:</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb145-1"><a href="gen.html#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="kw">mvdecode</span> Bula F233, mv(97/99)</span>
<span id="cb145-2"><a href="gen.html#cb145-2" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> ao_wo = Bula ==  F233</span></code></pre></div>
<p><strong>Die Ergebnisse solcher Veränderungen sollten immer überprüft werden!</strong></p>
<div class="sourceCode" id="cb146"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb146-1"><a href="gen.html#cb146-1" aria-hidden="true" tabindex="-1"></a><span class="kw">tab</span> ao_wo</span>
<span id="cb146-2"><a href="gen.html#cb146-2" aria-hidden="true" tabindex="-1"></a>browse Bula F233 ao_wo</span></code></pre></div>
<div class="sourceCode" id="cb147"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb147-1"><a href="gen.html#cb147-1" aria-hidden="true" tabindex="-1"></a><span class="ot">list</span> Bula F233 ao_wo <span class="kw">in</span> 157/160</span></code></pre></div>
<pre><code> | is not a valid command name
r(199);







  +-----------------------------+
  |     Bula       F233   ao_wo |
  |-----------------------------|
  | Rheinlan   Rheinlan       1 |
  | Rheinlan    Baden-W       0 |
  | Rheinlan   Rheinlan       1 |
  | Rheinlan          .       0 |
  +-----------------------------+</code></pre>
<p>Allerdings haben wir für <code>F233</code> doch missings definiert - was passiert mit denen?</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb149-1"><a href="gen.html#cb149-1" aria-hidden="true" tabindex="-1"></a>mdesc Bula F233 ao_wo </span></code></pre></div>
<pre><code> | is not a valid command name
r(199);

    Variable    |     Missing          Total     Percent Missing
----------------+-----------------------------------------------
           Bula |           0         20,012           0.00
           F233 |         285         20,012           1.42
          ao_wo |           0         20,012           0.00
----------------+-----------------------------------------------</code></pre>
<p>Leider gleicht Stata auch Missings mit gültigen Werten ab und vergibt dann dementsprechend 0 oder 1.
Um die Missings als Missing zu behalten, müssen wir mit entsprechenden <code>if</code>-Bedingungen die Zeilen mit Missings in <code>Bula</code> und <code>F233</code> ausschließen:</p>
<div class="sourceCode" id="cb151"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb151-1"><a href="gen.html#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="kw">drop</span> ao_wo <span class="co">// löschen</span></span>
<span id="cb151-2"><a href="gen.html#cb151-2" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> ao_wo =  Bula ==  F233 <span class="kw">if</span> !<span class="fu">missing</span>(F233) &amp; !<span class="fu">missing</span>(Bula)</span>
<span id="cb151-3"><a href="gen.html#cb151-3" aria-hidden="true" tabindex="-1"></a>mdesc Bula F233 ao_wo</span></code></pre></div>
<pre><code> | is not a valid command name
r(199);

    Variable    |     Missing          Total     Percent Missing
----------------+-----------------------------------------------
           Bula |           0         20,012           0.00
           F233 |         285         20,012           1.42
          ao_wo |         285         20,012           1.42
----------------+-----------------------------------------------</code></pre>
<div class="sourceCode" id="cb153"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb153-1"><a href="gen.html#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="kw">tab</span> ao_wo</span></code></pre></div>
<pre><code> | is not a valid command name
r(199);

      ao_wo |      Freq.     Percent        Cum.
------------+-----------------------------------
          0 |      1,769        8.97        8.97
          1 |     17,958       91.03      100.00
------------+-----------------------------------
      Total |     19,727      100.00</code></pre>
</div>
<div id="label" class="section level2" number="5.3">
<h2><span class="header-section-number">5.3</span> Neue Variablen labeln</h2>
<p>Die so erstellte Dummy-Variable können wir auch labeln.
Dazu definieren wir zunächst ein Wertelabel.
Dazu verwenden wir <code>label define</code>, gefolgt von einem Objektnamen für dieses Label (hier <code>aowo_lab</code>) und dann jeweils die Ausprägungen zusammen mit dem entsprechenden Label in ““. Dieses Label-Objekt wenden wir dann mit <code>label values</code> auf die Variable <code>ao_wo</code> an:</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb155-1"><a href="gen.html#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="kw">label</span> <span class="kw">define</span> aowo_lab 0 <span class="st">&quot;ungleich&quot;</span> 1 <span class="st">&quot;gleich&quot;</span></span>
<span id="cb155-2"><a href="gen.html#cb155-2" aria-hidden="true" tabindex="-1"></a><span class="kw">label</span> <span class="kw">values</span> ao_wo aowo_lab</span>
<span id="cb155-3"><a href="gen.html#cb155-3" aria-hidden="true" tabindex="-1"></a><span class="kw">tab</span> ao_wo</span></code></pre></div>
<pre><code> | is not a valid command name
r(199);

      ao_wo |      Freq.     Percent        Cum.
------------+-----------------------------------
   ungleich |      1,769        8.97        8.97
     gleich |     17,958       91.03      100.00
------------+-----------------------------------
      Total |     19,727      100.00</code></pre>
<p>Wenn wir das Label verändern, sehen wir das anschließend auch in <code>tabulate</code>:</p>
<div class="sourceCode" id="cb157"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb157-1"><a href="gen.html#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="kw">label</span> <span class="kw">define</span> aowo_lab 0 <span class="st">&quot;Ungleich&quot;</span> 1 <span class="st">&quot;Gleich&quot;</span>, <span class="kw">replace</span></span>
<span id="cb157-2"><a href="gen.html#cb157-2" aria-hidden="true" tabindex="-1"></a><span class="kw">tab</span> ao_wo</span></code></pre></div>
<pre><code> | is not a valid command name
r(199);

      ao_wo |      Freq.     Percent        Cum.
------------+-----------------------------------
   Ungleich |      1,769        8.97        8.97
     Gleich |     17,958       91.03      100.00
------------+-----------------------------------
      Total |     19,727      100.00</code></pre>
<hr />
<p><a href="gen.html#ue51"><strong>Übung 5-1</strong></a></p>
<hr />
</div>
<div id="bestehende-variablen-verändern" class="section level2" number="5.4">
<h2><span class="header-section-number">5.4</span> Bestehende Variablen verändern</h2>
<p>Natürlich können wir auch bestehende Variable verändern, ein Beispiel hatten wir mit <a href=""><code>mvdecode</code></a> bereits kennen gelernt. Während es bei <code>mvdecode</code> ja aber nur um Missings geht, gibt es auch Möglichkeiten die gültigen Werte zu verändern.</p>
<div id="recode" class="section level3" number="5.4.1">
<h3><span class="header-section-number">5.4.1</span> <code>recode</code></h3>
<p>Mit <code>recode</code> können wir Werte in einer bestehenden Variable verändern. Die veränderten Werte können wir in der bestehenden Variable überschreiben. Die häufig bessere Variante ist aber, die Originalwerte zu behalten und die veränderten Werte in einer neuer Variable abzulegen. Das geht mit der Option <code>,into(neuer_variablenname)</code></p>
Beispielsweise könnten wir <code>gkpol</code> zu weniger Kategorien zusammenfassen - zur Erinnerung, das waren die Originalausprägungen:
<table class="table table-condensed" style="font-size: 10px; width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
gkpol
</div>
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
neue Variable
</div>
</th>
</tr>
<tr>
<th style="text-align:right;">
Wert
</th>
<th style="text-align:left;">
Label
</th>
<th style="text-align:left;">
Kategorien
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;font-family: monospace;">
1
</td>
<td style="text-align:left;">
unter 2.000 Einwohner
</td>
<td style="text-align:left;">
1 - Klein
</td>
</tr>
<tr>
<td style="text-align:right;font-family: monospace;">
2
</td>
<td style="text-align:left;">
2.000 bis unter 5.000 Einwohner
</td>
<td style="text-align:left;">
1 - Klein
</td>
</tr>
<tr>
<td style="text-align:right;font-family: monospace;">
3
</td>
<td style="text-align:left;">
5.000 bis unter 20.000 Einwohner
</td>
<td style="text-align:left;">
1 - Klein
</td>
</tr>
<tr>
<td style="text-align:right;font-family: monospace;">
4
</td>
<td style="text-align:left;">
20.000 bis unter 50.000 Einwohner
</td>
<td style="text-align:left;">
2 - Mittel
</td>
</tr>
<tr>
<td style="text-align:right;font-family: monospace;">
5
</td>
<td style="text-align:left;">
50.000 bis unter 100.000 Einwohner
</td>
<td style="text-align:left;">
2 - Mittel
</td>
</tr>
<tr>
<td style="text-align:right;font-family: monospace;">
6
</td>
<td style="text-align:left;">
100.000 bis unter 500.000 Einwohner
</td>
<td style="text-align:left;">
3 - Groß
</td>
</tr>
<tr>
<td style="text-align:right;font-family: monospace;">
7
</td>
<td style="text-align:left;">
500.000 und mehr Einwohner
</td>
<td style="text-align:left;">
3 - Groß
</td>
</tr>
</tbody>
</table>
<p>Mit <code>recode</code> können wir diese Ausprägungen zusammenfassen, indem wir immer (<code>alt</code>=<code>neu</code>) angeben. Umcodierungen sollten immer mit <code>tab alt neu</code> überprüft werden:</p>
<div class="sourceCode" id="cb159"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb159-1"><a href="gen.html#cb159-1" aria-hidden="true" tabindex="-1"></a><span class="kw">recode</span> gkpol (2=1) (3=1) (4=2) (5=2) (6=3) (7=3), into(gkpol2)</span>
<span id="cb159-2"><a href="gen.html#cb159-2" aria-hidden="true" tabindex="-1"></a><span class="kw">tab</span> gkpol gkpol2</span></code></pre></div>
<pre><code> | is not a valid command name
r(199);




(18928 differences between gkpol and gkpol2)

                      |         RECODE of gkpol
   Gemeindekennziffer |  (Gemeindekennziffer politisch)
            politisch |         1          2          3 |     Total
----------------------+---------------------------------+----------
unter 2.000 Einwohner |     1,084          0          0 |     1,084 
2.000 bis unter 5.000 |     1,670          0          0 |     1,670 
5.000 bis unter 20.00 |     5,002          0          0 |     5,002 
20.000 bis unter 50.0 |         0      3,550          0 |     3,550 
50.000 bis unter 100. |         0      1,624          0 |     1,624 
100.000 bis unter 500 |         0          0      2,970 |     2,970 
500.000 und mehr Einw |         0          0      4,112 |     4,112 
----------------------+---------------------------------+----------
                Total |     7,756      5,174      7,082 |    20,012 </code></pre>
<p>Nicht erwähnte Ausprägungen werden einfach übernommen - daher ist <code>1</code> hier nicht aufgeführt.</p>
<p>Ein Vorteil von recode ist, dass wir direkt Labels vergeben können, die wir einfach in <code>""</code> anhängen - nochmal der gleich Befehl mit direkten Labels:</p>
<div class="sourceCode" id="cb161"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb161-1"><a href="gen.html#cb161-1" aria-hidden="true" tabindex="-1"></a><span class="kw">drop</span> gkpol2 <span class="co">// nochmal neu</span></span>
<span id="cb161-2"><a href="gen.html#cb161-2" aria-hidden="true" tabindex="-1"></a><span class="kw">recode</span> gkpol (2=1 <span class="st">&quot;Klein&quot;</span>) (3=1 <span class="st">&quot;Klein&quot;</span>) (4=2 <span class="st">&quot;Mittel&quot;</span>) (5=2 <span class="st">&quot;Mittel&quot;</span>) (6=3 <span class="st">&quot;Groß&quot;</span>) (7=3 <span class="st">&quot;Groß&quot;</span>), into(gkpol2)</span></code></pre></div>
<pre><code> | is not a valid command name
r(199);




(18928 differences between gkpol and gkpol2)

                      |         RECODE of gkpol
   Gemeindekennziffer |  (Gemeindekennziffer politisch)
            politisch |     Klein     Mittel       Groß |     Total
----------------------+---------------------------------+----------
unter 2.000 Einwohner |     1,084          0          0 |     1,084 
2.000 bis unter 5.000 |     1,670          0          0 |     1,670 
5.000 bis unter 20.00 |     5,002          0          0 |     5,002 
20.000 bis unter 50.0 |         0      3,550          0 |     3,550 
50.000 bis unter 100. |         0      1,624          0 |     1,624 
100.000 bis unter 500 |         0          0      2,970 |     2,970 
500.000 und mehr Einw |         0          0      4,112 |     4,112 
----------------------+---------------------------------+----------
                Total |     7,756      5,174      7,082 |    20,012 </code></pre>
<p><strong>Tricks</strong>, die alle aber zum gleichen Ergebnis führen:</p>
<p>Wir können auch mehrere Werte vor dem <code>=</code> angeben:</p>
<div class="sourceCode" id="cb163"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb163-1"><a href="gen.html#cb163-1" aria-hidden="true" tabindex="-1"></a><span class="kw">drop</span> gkpol2</span>
<span id="cb163-2"><a href="gen.html#cb163-2" aria-hidden="true" tabindex="-1"></a><span class="kw">recode</span> gkpol (1 2 3=1 <span class="st">&quot;Klein&quot;</span>) (4 5=2 <span class="st">&quot;Mittel&quot;</span>) (6 7=3 <span class="st">&quot;Groß&quot;</span>), into(gkpol2)</span></code></pre></div>
<p>Außerdem können wir mit Hilfe von <code>/</code> auch Wertebereiche ansprechen:</p>
<div class="sourceCode" id="cb164"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb164-1"><a href="gen.html#cb164-1" aria-hidden="true" tabindex="-1"></a><span class="kw">drop</span> gkpol2</span>
<span id="cb164-2"><a href="gen.html#cb164-2" aria-hidden="true" tabindex="-1"></a><span class="kw">recode</span> gkpol (1/3=1 <span class="st">&quot;Klein&quot;</span>) (4/5=2 <span class="st">&quot;Mittel&quot;</span>) (6/7=3 <span class="st">&quot;Groß&quot;</span>), into(gkpol2)</span></code></pre></div>
Wir können in <code>recode</code> auch folgende Hilfsausdrücke verwenden, bspw. <code>recode gkpol .... (6/max =3 "Groß"),....</code>:
<table class="table table-condensed" style="font-size: 10px; width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;color: white !important;">
expr
</th>
<th style="text-align:left;color: white !important;">
expl
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;font-family: monospace;">
min
</td>
<td style="text-align:left;">
Minimalwert
</td>
</tr>
<tr>
<td style="text-align:left;font-family: monospace;">
max
</td>
<td style="text-align:left;">
Maximalwert (missings werden hier ausnahmsweise nicht mit eingeschlossen)
</td>
</tr>
<tr>
<td style="text-align:left;font-family: monospace;">
else or *
</td>
<td style="text-align:left;">
alle anderen Werte
</td>
</tr>
<tr>
<td style="text-align:left;font-family: monospace;">
miss
</td>
<td style="text-align:left;">
alle missing Werte, die nicht von einer anderen Regeln angesprochen werden
</td>
</tr>
<tr>
<td style="text-align:left;font-family: monospace;">
nonmiss
</td>
<td style="text-align:left;">
alle nicht-missing Werte, die nicht von einer anderen Regeln angesprochen werden
</td>
</tr>
</tbody>
</table>
<hr />
<p><a href="gen.html#ue52"><strong>Übung 5-2</strong></a></p>
<hr />
</div>
<div id="replace-informationen-aus-mehreren-variablen-in-einer-variable-zusammenführen" class="section level3" number="5.4.2">
<h3><span class="header-section-number">5.4.2</span> <code>replace</code>: Informationen aus mehreren Variablen in einer Variable zusammenführen</h3>
<p>Ein weiterer nützlicher Befehl ist <code>replace</code>. Hier können wir bestehende Variable verändern. Das ist inbesondere in Zusammenspiel mit <code>if</code>-Bedingungen hilfreich.
Manchmal liegt eine interessierende Information aufgeteilt auf mehrere Variablen vor. Ein Beispiel hierfür ist die Erwerbskonstellation von Paaren in der Erwerbstätigenbefragung. Wir können aus den Informationen <code>F1600</code> (Familienstand), <code>F1601</code> (leben die Befragten mit der*der Partner*in zusammen?) und <code>F1603</code> (ist Partner*in berufstätig?) eine Variable mit 3 Ausprägungen bauen:</p>
<ul>
<li>1 “nicht verh./alleine lebend”</li>
<li>2 “verh. &amp; 2 Erwerbspersonen im HH”</li>
<li>3 “verh. &amp; 1 Erwerbsperson”</li>
</ul>
<div class="sourceCode" id="cb165"><pre class="sourceCode stata"><code class="sourceCode stata"><span id="cb165-1"><a href="gen.html#cb165-1" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> erw_hh = .          <span class="co">// leere Variable erstellen</span></span>
<span id="cb165-2"><a href="gen.html#cb165-2" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> erw_hh = 1 <span class="kw">if</span> F1601 == 2 <span class="co">// alleine -&gt; leben nicht zusammen</span></span>
<span id="cb165-3"><a href="gen.html#cb165-3" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> erw_hh = 2 <span class="kw">if</span> F1601 == 1 &amp; F1603 == 1 <span class="co">// zusammenlebend, Partner*in erwerbstätig</span></span>
<span id="cb165-4"><a href="gen.html#cb165-4" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> erw_hh = 3 <span class="kw">if</span> F1601 == 1 &amp; F1603 == 2 <span class="co">// zusammenlebend, Partner*in nicht erwerbstätig</span></span>
<span id="cb165-5"><a href="gen.html#cb165-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb165-6"><a href="gen.html#cb165-6" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> erw_hh = 1 <span class="kw">if</span> <span class="fu">inlist</span>(F1600,2,3,4) <span class="co">// keine Partnerschaft -&gt; auch auf 1</span></span>
<span id="cb165-7"><a href="gen.html#cb165-7" aria-hidden="true" tabindex="-1"></a>*! unverheiratete werden hier nicht als Partnerschaften behandelt</span>
<span id="cb165-8"><a href="gen.html#cb165-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb165-9"><a href="gen.html#cb165-9" aria-hidden="true" tabindex="-1"></a>lab <span class="kw">define</span> erw_lab 1 <span class="st">&quot;nicht verh./alleine lebend&quot;</span> 2 <span class="st">&quot;verh. &amp; 2 Erwerbspersonen im HH&quot;</span> 3 <span class="st">&quot;verh. &amp; 1 Erwerbsperson&quot;</span></span>
<span id="cb165-10"><a href="gen.html#cb165-10" aria-hidden="true" tabindex="-1"></a>lab <span class="kw">values</span> erw_hh erw_lab</span>
<span id="cb165-11"><a href="gen.html#cb165-11" aria-hidden="true" tabindex="-1"></a><span class="kw">tab</span> erw_hh</span></code></pre></div>
<hr />
<p><a href="gen.html#ue53"><strong>Übung 5-3</strong></a></p>
<hr />
</div>
</div>
<div id="genue" class="section level2" number="5.5">
<h2><span class="header-section-number">5.5</span> Übungen 5</h2>
<ol start="22" class="example" style="list-style-type: decimal">
<li>Laden Sie den BIBB/BAuA Erwerbstätigenbefragung 2018 (<code>BIBBBAuA_2018_suf1.dta</code>).</li>
</ol>
<div id="ue51" class="section level3" number="5.5.1">
<h3><span class="header-section-number">5.5.1</span> Übung 5-1</h3>
<ol start="23" class="example" style="list-style-type: decimal">
<li>Erstellen Sie eine Dummy-Variable, die erfasst, ob die Befraten in der gleichen NUTS-2-Region leben und arbeiten</li>
</ol>
<ul>
<li><code>nuts2</code> enthält den Wohnort, <code>F233_nuts2</code> enthält den Ort der Betriebsstätte</li>
<li>Schließen Sie die Missings aus (<code>99996</code> bis <code>99999</code>)</li>
<li>Erstellen Sie die Variable mit <code>gen</code>. Denken Sie an den <code>==</code> Operator.</li>
<li>Kontrollieren Sie das Ergebnis mit <code>browse</code></li>
<li>Definieren Sie Labels für diese Dummyvariable: “Wohnort = Arbeitsort” “Wohnort != Arbeitsort”</li>
</ul>
<ol start="24" class="example" style="list-style-type: decimal">
<li>Verändern Sie das Label <code>S1</code> von 1 = “männlich” und 2= “weiblich” auf 1 = “Männer” und 2 = “Frauen.”</li>
</ol>
<ul>
<li>Lassen Sie sich mit <code>tab S1</code> die Variable ausgeben.</li>
<li>Verändern Sie die Labels mit <code>label define .... , replace</code></li>
<li>Lassen Sie sich mit <code>tab S1</code> die Variable erneut ausgeben - hat das geklappt wie gedacht?</li>
</ul>
</div>
<div id="ue52" class="section level3" number="5.5.2">
<h3><span class="header-section-number">5.5.2</span> Übung 5-2</h3>
<ol start="25" class="example" style="list-style-type: decimal">
<li>Fassen Sie die Variable “Gesamtnote Schulabschluss” (<code>F1108</code>) in drei Kategorien zusammen:
<table class="table table-condensed" style="font-size: 10px; width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="2">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
F1108
</div>
</th>
<th style="border-bottom:hidden;padding-bottom:0; padding-left:3px;padding-right:3px;text-align: center; " colspan="1">
<div style="border-bottom: 1px solid #ddd; padding-bottom: 5px; ">
neue Variable
</div>
</th>
</tr>
<tr>
<th style="text-align:right;">
Wert
</th>
<th style="text-align:left;">
Label
</th>
<th style="text-align:left;">
neu
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;font-family: monospace;">
1
</td>
<td style="text-align:left;">
sehr gut
</td>
<td style="text-align:left;">
1 - (sehr) gut
</td>
</tr>
<tr>
<td style="text-align:right;font-family: monospace;">
2
</td>
<td style="text-align:left;">
gut
</td>
<td style="text-align:left;">
1 - (sehr) gut
</td>
</tr>
<tr>
<td style="text-align:right;font-family: monospace;">
3
</td>
<td style="text-align:left;">
befriedigend
</td>
<td style="text-align:left;">
2 - bestanden
</td>
</tr>
<tr>
<td style="text-align:right;font-family: monospace;">
4
</td>
<td style="text-align:left;">
ausreichend
</td>
<td style="text-align:left;">
2 - bestanden
</td>
</tr>
<tr>
<td style="text-align:right;font-family: monospace;">
7
</td>
<td style="text-align:left;">
keine Note vorgesehen
</td>
<td style="text-align:left;">
3 - fehlend
</td>
</tr>
<tr>
<td style="text-align:right;font-family: monospace;">
8
</td>
<td style="text-align:left;">
weiß nicht
</td>
<td style="text-align:left;">
3 - fehlend
</td>
</tr>
<tr>
<td style="text-align:right;font-family: monospace;">
9
</td>
<td style="text-align:left;">
keine Angabe
</td>
<td style="text-align:left;">
3 - fehlend
</td>
</tr>
</tbody>
</table></li>
</ol>
<ul>
<li>Nutzen Sie die Label-Funktion von <a href="gen.html#recode"><code>recode</code></a></li>
</ul>
</div>
<div id="ue53" class="section level3" number="5.5.3">
<h3><span class="header-section-number">5.5.3</span> Übung 5-3</h3>
<ol start="26" class="example" style="list-style-type: decimal">
<li><p>Fassen Sie die Variablen <code>F209</code> ( Arbeitszeit normalerweise zwischen 7 und 19 Uhr?) und <code>F223</code> (mindestens einmal im Monat Sonntagsarbeit) zu einer Variable <code>a_zeit</code> mit folgenden Ausprägungen zusammen:</p>
<blockquote>
<p>1 zwischen 7-19 Uhr &amp; keine Sonntagsarbeit<br />
2 nicht zwischen 7-19 Uhr, aber keine Sonntagsarbeit<br />
3 zwischen 7-19 Uhr aber Sonntagsarbeit<br />
4 nicht zwischen 7-19 Uhr und Sonntagsarbeit</p>
</blockquote></li>
</ol>
<p>(Für Tipp weiter nach unten Scrollen)</p>
<hr />
<pre><code>F209 == 1 &amp; F223 == 2  // 1 zwischen 7-19 Uhr &amp; keine Sonntagsarbeit              
F209 == 2 &amp; F223 == 2  // 2 nicht zwischen 7-19 Uhr, aber keine Sonntagsarbeit    
F209 == 1 &amp; F223 == 1  // 3 zwischen 7-19 Uhr aber Sonntagsarbeit                 
F209 == 2 &amp; F223 == 1  // 4 nicht zwischen 7-19 Uhr und Sonntagsarbeit            </code></pre>

</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="iflab.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="egen.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["StataBIBB1.pdf", "StataBIBB1.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
